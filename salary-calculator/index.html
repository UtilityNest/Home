<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Advanced Salary Calculator - Calculate Tax, Deductions, Take-Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #1f2937;
      line-height: 1.6;
      min-height: 100vh;
    }

    header {
      background: white;
      border-bottom: 3px solid #667eea;
      padding: 16px 20px;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    header a {
      font-size: 24px;
      font-weight: 700;
      color: #667eea;
      text-decoration: none;
    }

    .breadcrumb {
      padding: 10px 20px;
      font-size: 13px;
      color: #9ca3af;
      background: white;
      border-bottom: 1px solid #e5e7eb;
    }

    .breadcrumb a {
      color: #667eea;
      text-decoration: none;
    }

    .section {
      max-width: 1300px;
      margin: 30px auto;
      padding: 0 20px;
    }

    .section h1 {
      font-size: 36px;
      margin-bottom: 15px;
      color: white;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
      font-weight: 800;
    }

    .card {
      background: white;
      border-radius: 12px;
      padding: 28px;
      margin-bottom: 24px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
      border: 1px solid #e5e7eb;
    }

    .card h2 {
      font-size: 22px;
      margin-bottom: 20px;
      color: #1f2937;
      font-weight: 700;
    }

    .gradient-card {
      background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
      border: 2px solid #667eea;
    }

    .tabs {
      display: flex;
      gap: 0;
      border-bottom: 3px solid #e5e7eb;
      margin-bottom: 24px;
      overflow-x: auto;
    }

    .tab-button {
      padding: 14px 22px;
      background: none;
      border: none;
      font-size: 14px;
      font-weight: 700;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
      margin-bottom: -3px;
      white-space: nowrap;
    }

    .tab-button:hover {
      color: #667eea;
    }

    .tab-button.active {
      color: #667eea;
      border-bottom-color: #667eea;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .form-group {
      margin-bottom: 22px;
    }

    .form-group label {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 8px;
    }

    .form-group input, .form-group select {
      width: 100%;
      padding: 11px 14px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      font-family: inherit;
      transition: all 0.3s;
      background: white;
    }

    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
      background: #f9fafb;
    }

    .input-help {
      font-size: 12px;
      color: #9ca3af;
      margin-top: 4px;
    }

    .slider-container {
      margin-top: 10px;
    }

    input[type="range"] {
      width: 100%;
      height: 7px;
      border-radius: 4px;
      background: #e5e7eb;
      outline: none;
      -webkit-appearance: none;
      appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(102, 126, 234, 0.4);
    }

    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      cursor: pointer;
      border: none;
      box-shadow: 0 2px 6px rgba(102, 126, 234, 0.4);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    @media (max-width: 768px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }
    }

    .results-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-top: 24px;
    }

    @media (max-width: 1024px) {
      .results-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .results-grid {
        grid-template-columns: 1fr;
      }
    }

    .result-box {
      background: linear-gradient(135deg, #f3f4f6 0%, #f9fafb 100%);
      border-left: 5px solid #667eea;
      padding: 18px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      transition: all 0.3s;
    }

    .result-box:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.15);
    }

    .result-label {
      font-size: 11px;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      margin-bottom: 8px;
      font-weight: 700;
    }

    .result-value {
      font-size: 28px;
      font-weight: 800;
      color: #667eea;
      font-family: 'Courier New', monospace;
    }

    .result-box.success {
      border-left-color: #10b981;
    }

    .result-box.success .result-value {
      color: #059669;
    }

    .result-box.warning {
      border-left-color: #f59e0b;
      background: linear-gradient(135deg, #fef3c7 0%, #fef9e7 100%);
    }

    .result-box.warning .result-value {
      color: #d97706;
    }

    .result-box.danger {
      border-left-color: #ef4444;
    }

    .result-box.danger .result-value {
      color: #dc2626;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      margin-top: 16px;
    }

    table thead {
      background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
      border-bottom: 2px solid #d1d5db;
    }

    table th {
      padding: 14px;
      text-align: left;
      font-weight: 700;
      color: #1f2937;
    }

    table td {
      padding: 12px 14px;
      border-bottom: 1px solid #e5e7eb;
    }

    table tbody tr:hover {
      background: linear-gradient(90deg, #f3f4f6 0%, #f9fafb 100%);
    }

    .actions {
      display: flex;
      gap: 10px;
      margin-top: 28px;
      flex-wrap: wrap;
    }

    .actions button {
      flex: 1;
      min-width: 140px;
      padding: 12px 18px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      background: white;
      color: #374151;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
    }

    .actions button:hover {
      border-color: #667eea;
      color: #667eea;
      background: #f3f4f6;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-color: #667eea;
    }

    .btn-primary:hover {
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
      transform: translateY(-2px);
    }

    .breakdown-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-top: 20px;
    }

    @media (max-width: 768px) {
      .breakdown-grid {
        grid-template-columns: 1fr;
      }
    }

    .breakdown-item {
      background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
      padding: 16px;
      border-radius: 10px;
      border-left: 5px solid #667eea;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .breakdown-label {
      font-size: 11px;
      color: #6b7280;
      text-transform: uppercase;
      margin-bottom: 6px;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .breakdown-value {
      font-size: 20px;
      font-weight: 800;
      color: #1f2937;
      font-family: 'Courier New', monospace;
    }

    .info-box {
      background: linear-gradient(135deg, #dbeafe 0%, #e0f2fe 100%);
      border-left: 5px solid #0284c7;
      padding: 14px;
      border-radius: 8px;
      margin-top: 16px;
      font-size: 12px;
      color: #0c4a6e;
      line-height: 1.8;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
      margin-top: 20px;
    }

    .comparison-card {
      background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
      border: 2px solid #667eea;
      padding: 16px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
    }

    .comparison-card h4 {
      color: #667eea;
      font-size: 13px;
      margin-bottom: 12px;
      font-weight: 700;
    }

    .comparison-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid rgba(102, 126, 234, 0.2);
      font-size: 12px;
    }

    .comparison-item:last-child {
      border-bottom: none;
    }

    .comparison-label {
      color: #6b7280;
      font-weight: 600;
    }

    .comparison-value {
      color: #1f2937;
      font-weight: 700;
      font-family: 'Courier New', monospace;
    }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 14px 22px;
      border-radius: 10px;
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
      z-index: 1000;
      animation: slideIn 0.3s ease;
      font-weight: 700;
    }

    @keyframes slideIn {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .chart-container {
      margin-top: 24px;
      padding: 20px;
      background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
      border-radius: 10px;
      border: 1px solid #e5e7eb;
    }

    .chart-container h3 {
      font-size: 16px;
      margin-bottom: 16px;
      color: #1f2937;
      font-weight: 700;
    }

    canvas {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
    }

    footer {
      background: white;
      border-top: 3px solid #667eea;
      padding: 28px 20px;
      margin-top: 50px;
      text-align: center;
      color: #6b7280;
      font-size: 12px;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.05);
    }

    @media (max-width: 768px) {
      .section h1 {
        font-size: 28px;
      }

      .card {
        padding: 18px;
      }

      .result-value {
        font-size: 22px;
      }
    }
  </style>
</head>
<body>

<header>
  <a href="#">üí∞ Advanced Salary Calculator</a>
</header>

<nav class="breadcrumb">
  üìä Financial Calculators ‚Ä∫ Salary Calculator
</nav>

<section class="section">
  <h1>üíº Advanced Salary Calculator with Income Tax</h1>

  <div class="card gradient-card">
    <h2>Calculate Salary, Tax, Deductions & Take-Home Pay</h2>

    <div class="tabs">
      <button class="tab-button active" onclick="switchTab(event, 'basic')">üìã Basic</button>
      <button class="tab-button" onclick="switchTab(event, 'tax')">üìä Tax Calculation</button>
      <button class="tab-button" onclick="switchTab(event, 'deductions')">üîç Deductions</button>
      <button class="tab-button" onclick="switchTab(event, 'comparison')">üìà Comparison</button>
    </div>

    <!-- BASIC TAB -->
    <div id="basic" class="tab-content active">
      <div class="grid-2">
        <div>
          <div class="form-group">
            <label>Designation/Position</label>
            <input type="text" id="designation" placeholder="e.g., Engineer, Manager" value="Software Engineer">
          </div>

          <div class="form-group">
            <label>Annual Basic Salary (‚Çπ)</label>
            <input type="number" id="basicSalary" value="600000" min="0" oninput="calculate()">
            <div class="input-help">Basic salary excluding allowances</div>
            <div class="slider-container">
              <input type="range" id="basicSlider" min="100000" max="100000000" value="600000" step="10000" oninput="syncBasic()">
            </div>
          </div>

          <div class="form-group">
            <label>House Rent Allowance - HRA (‚Çπ/month)</label>
            <input type="number" id="hra" value="30000" min="0" oninput="calculate()">
            <div class="input-help">Monthly HRA component</div>
          </div>

          <div class="form-group">
            <label>Dearness Allowance - DA (‚Çπ/month)</label>
            <input type="number" id="da" value="10000" min="0" oninput="calculate()">
            <div class="input-help">Monthly DA component</div>
          </div>

          <div class="form-group">
            <label>Conveyance Allowance (‚Çπ/month)</label>
            <input type="number" id="conveyance" value="1600" min="0" oninput="calculate()">
            <div class="input-help">Monthly conveyance/travel allowance</div>
          </div>

          <div class="form-group">
            <label>Medical Allowance (‚Çπ/month)</label>
            <input type="number" id="medical" value="3000" min="0" oninput="calculate()">
            <div class="input-help">Monthly medical allowance</div>
          </div>
        </div>

        <div>
          <div class="form-group">
            <label>Other Allowances (‚Çπ/month)</label>
            <input type="number" id="other" value="0" min="0" oninput="calculate()">
            <div class="input-help">Any other monthly allowances</div>
          </div>

          <div class="form-group">
            <label>Financial Year</label>
            <select id="financialYear" onchange="calculate()">
              <option value="2024-25" selected>2024-25 (Current)</option>
              <option value="2023-24">2023-24</option>
              <option value="2022-23">2022-23</option>
            </select>
            <div class="input-help">Select financial year for tax calculation</div>
          </div>

          <div class="form-group">
            <label>Age Category</label>
            <select id="ageCategory" onchange="calculate()">
              <option value="general" selected>General (Below 60 years)</option>
              <option value="senior">Senior Citizen (60-80 years)</option>
              <option value="super">Super Senior (Above 80 years)</option>
            </select>
            <div class="input-help">Different tax slabs apply for different age groups</div>
          </div>

          <div class="form-group">
            <label>Regime</label>
            <select id="regime" onchange="calculate()">
              <option value="new" selected>New Tax Regime (Default)</option>
              <option value="old">Old Tax Regime</option>
              <option value="both">Show Both</option>
            </select>
            <div class="input-help">Choose tax regime for calculation</div>
          </div>

          <div class="form-group">
            <label>Number of Months</label>
            <input type="number" id="months" value="12" min="1" max="12" step="1" oninput="calculate()">
            <div class="input-help">Number of working months in year</div>
          </div>
        </div>
      </div>

      <div class="results-grid">
        <div class="result-box">
          <div class="result-label">Monthly Gross Salary</div>
          <div class="result-value">‚Çπ<span id="monthlyGross">0</span></div>
        </div>
        <div class="result-box">
          <div class="result-label">Annual Gross Salary</div>
          <div class="result-value">‚Çπ<span id="annualGross">0</span></div>
        </div>
        <div class="result-box">
          <div class="result-label">Total Allowances/Month</div>
          <div class="result-value">‚Çπ<span id="totalAllowances">0</span></div>
        </div>
        <div class="result-box success">
          <div class="result-label">Gross Earnings/Month</div>
          <div class="result-value">‚Çπ<span id="totalEarnings">0</span></div>
        </div>
      </div>

      <div class="breakdown-grid">
        <div class="breakdown-item">
          <div class="breakdown-label">Monthly Basic</div>
          <div class="breakdown-value">‚Çπ<span id="breakBasic">0</span></div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">Annual Basic</div>
          <div class="breakdown-value">‚Çπ<span id="breakAnnualBasic">0</span></div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">Total Allowances (Annual)</div>
          <div class="breakdown-value">‚Çπ<span id="breakAllowances">0</span></div>
        </div>
      </div>

      <div class="info-box">
        üí° <strong>Gross Salary = Basic + HRA + DA + Conveyance + Medical + Other Allowances</strong><br>
        Standard tax slabs apply for FY 2024-25. Enter exact monthly amounts for accurate calculation.
      </div>
    </div>

    <!-- TAX CALCULATION TAB -->
    <div id="tax" class="tab-content">
      <div class="grid-2">
        <div>
          <div class="form-group">
            <label>Investment under Section 80C (‚Çπ)</label>
            <input type="number" id="section80c" value="0" min="0" max="1500000" oninput="calculate()">
            <div class="input-help">ELSS, PPF, LIC, NSC, etc. (Max ‚Çπ1,50,000)</div>
          </div>

          <div class="form-group">
            <label>Investment under Section 80CCD (‚Çπ)</label>
            <input type="number" id="section80ccd" value="0" min="0" max="2000000" oninput="calculate()">
            <div class="input-help">NPS contribution (Max ‚Çπ2,00,000)</div>
          </div>

          <div class="form-group">
            <label>Home Loan Interest (‚Çπ)</label>
            <input type="number" id="homeLoanInterest" value="0" min="0" max="2000000" oninput="calculate()">
            <div class="input-help">Section 24 - Home loan interest (Max ‚Çπ2,00,000)</div>
          </div>

          <div class="form-group">
            <label>Mediclaim Premium (‚Çπ)</label>
            <input type="number" id="mediclaim" value="0" min="0" max="1000000" oninput="calculate()">
            <div class="input-help">Health insurance premium (Section 80D)</div>
          </div>

          <div class="form-group">
            <label>Rent Paid (‚Çπ)</label>
            <input type="number" id="rentPaid" value="0" min="0" oninput="calculate()">
            <div class="input-help">For HRA exemption calculation</div>
          </div>
        </div>

        <div>
          <div class="form-group">
            <label>Education Loan Interest (‚Çπ)</label>
            <input type="number" id="educationLoan" value="0" min="0" max="500000" oninput="calculate()">
            <div class="input-help">Section 80E - No upper limit</div>
          </div>

          <div class="form-group">
            <label>Donation under 80G (‚Çπ)</label>
            <input type="number" id="section80g" value="0" min="0" oninput="calculate()">
            <div class="input-help">50% or 100% deduction eligible donations</div>
          </div>

          <div class="form-group">
            <label>Interest on Savings Account (‚Çπ)</label>
            <input type="number" id="savingsInterest" value="0" min="0" oninput="calculate()">
            <div class="input-help">Section 80TTA - Max ‚Çπ10,000</div>
          </div>

          <div class="form-group">
            <label>Standard Deduction (‚Çπ)</label>
            <input type="number" id="standardDeduction" value="75000" min="0" max="75000" oninput="calculate()">
            <div class="input-help">FY 2024-25: ‚Çπ75,000 (salaried)</div>
          </div>

          <div class="form-group">
            <label>Surcharge %</label>
            <input type="number" id="surcharge" value="0" min="0" max="37" step="0.1" oninput="calculate()">
            <div class="input-help">Applied if income exceeds certain limit</div>
          </div>
        </div>
      </div>

      <div class="results-grid">
        <div class="result-box">
          <div class="result-label">Taxable Income</div>
          <div class="result-value">‚Çπ<span id="taxableIncome">0</span></div>
        </div>
        <div class="result-box">
          <div class="result-label">Income Tax (New)</div>
          <div class="result-value">‚Çπ<span id="incomeTaxNew">0</span></div>
        </div>
        <div class="result-box warning">
          <div class="result-label">Income Tax (Old)</div>
          <div class="result-value">‚Çπ<span id="incomeTaxOld">0</span></div>
        </div>
        <div class="result-box danger">
          <div class="result-label">Total Tax Payable</div>
          <div class="result-value">‚Çπ<span id="totalTax">0</span></div>
        </div>
      </div>
    </div>

    <!-- DEDUCTIONS TAB -->
    <div id="deductions" class="tab-content">
      <div class="grid-2">
        <div>
          <div class="form-group">
            <label>Provident Fund - EPF (% of Basic)</label>
            <input type="number" id="pf" value="12" min="0" max="100" step="0.1" oninput="calculate()">
            <div class="input-help">Employee contribution percentage</div>
          </div>

          <div class="form-group">
            <label>Employee State Insurance - ESI (%)</label>
            <input type="number" id="esi" value="0.75" min="0" max="10" step="0.01" oninput="calculate()">
            <div class="input-help">Applies if salary below ‚Çπ21,000</div>
          </div>

          <div class="form-group">
            <label>Professional Tax (‚Çπ)</label>
            <input type="number" id="professionalTax" value="200" min="0" max="5000" oninput="calculate()">
            <div class="input-help">Varies by state and salary</div>
          </div>

          <div class="form-group">
            <label>Loan EMI (‚Çπ/month)</label>
            <input type="number" id="loanEmi" value="0" min="0" oninput="calculate()">
            <div class="input-help">Personal/car/education loan</div>
          </div>

          <div class="form-group">
            <label>Union Fee (‚Çπ/month)</label>
            <input type="number" id="unionFee" value="0" min="0" oninput="calculate()">
            <div class="input-help">If applicable</div>
          </div>
        </div>

        <div>
          <div class="form-group">
            <label>Voluntary Contribution (‚Çπ/month)</label>
            <input type="number" id="voluntaryFund" value="0" min="0" oninput="calculate()">
            <div class="input-help">Voluntary contributions to funds</div>
          </div>

          <div class="form-group">
            <label>Life Insurance Premium (‚Çπ/month)</label>
            <input type="number" id="lifeInsurance" value="0" min="0" oninput="calculate()">
            <div class="input-help">Monthly insurance deduction</div>
          </div>

          <div class="form-group">
            <label>Lunch Deduction (‚Çπ/month)</label>
            <input type="number" id="lunch" value="0" min="0" oninput="calculate()">
            <div class="input-help">Office canteen deduction</div>
          </div>

          <div class="form-group">
            <label>Other Statutory Deductions (‚Çπ/month)</label>
            <input type="number" id="other_deductions" value="0" min="0" oninput="calculate()">
            <div class="input-help">Any other mandatory deductions</div>
          </div>

          <div class="form-group">
            <label>Other Voluntary Deductions (‚Çπ/month)</label>
            <input type="number" id="other_voluntary" value="0" min="0" oninput="calculate()">
            <div class="input-help">Any optional deductions</div>
          </div>
        </div>
      </div>

      <div class="results-grid">
        <div class="result-box">
          <div class="result-label">Monthly PF Deduction</div>
          <div class="result-value">‚Çπ<span id="pfAmount">0</span></div>
        </div>
        <div class="result-box">
          <div class="result-label">Monthly ESI Deduction</div>
          <div class="result-value">‚Çπ<span id="esiAmount">0</span></div>
        </div>
        <div class="result-box">
          <div class="result-label">Total Statutory Deductions</div>
          <div class="result-value">‚Çπ<span id="totalStatutory">0</span></div>
        </div>
        <div class="result-box success">
          <div class="result-label">Monthly Net Salary</div>
          <div class="result-value">‚Çπ<span id="monthlySalary">0</span></div>
        </div>
      </div>

      <div class="breakdown-grid">
        <div class="breakdown-item">
          <div class="breakdown-label">Total Earnings/Month</div>
          <div class="breakdown-value">‚Çπ<span id="breakEarnings">0</span></div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">Total Deductions/Month</div>
          <div class="breakdown-value">‚Çπ<span id="breakDeductions">0</span></div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">Net Take-Home/Month</div>
          <div class="breakdown-value">‚Çπ<span id="breakTakeHome">0</span></div>
        </div>
      </div>
    </div>

    <!-- COMPARISON TAB -->
    <div id="comparison" class="tab-content">
      <h3>Salary & Tax Comparison</h3>
      <div class="comparison-grid">
        <div class="comparison-card">
          <h4>üìä Monthly Breakdown</h4>
          <div class="comparison-item">
            <span class="comparison-label">Basic Salary</span>
            <span class="comparison-value">‚Çπ<span id="comp1">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Total Allowances</span>
            <span class="comparison-value">‚Çπ<span id="comp2">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Gross Salary</span>
            <span class="comparison-value">‚Çπ<span id="comp3">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Total Deductions</span>
            <span class="comparison-value">‚Çπ<span id="comp4">0</span></span>
          </div>
          <div class="comparison-item" style="border-bottom: 2px solid rgba(102, 126, 234, 0.3); padding: 12px 0; font-weight: 700;">
            <span class="comparison-label">Net Salary</span>
            <span class="comparison-value">‚Çπ<span id="comp5">0</span></span>
          </div>
        </div>

        <div class="comparison-card">
          <h4>üí∞ Annual Breakdown</h4>
          <div class="comparison-item">
            <span class="comparison-label">Gross Income (Annual)</span>
            <span class="comparison-value">‚Çπ<span id="comp6">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Less: Deductions</span>
            <span class="comparison-value">‚Çπ<span id="comp7">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Taxable Income</span>
            <span class="comparison-value">‚Çπ<span id="comp8">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Income Tax</span>
            <span class="comparison-value">‚Çπ<span id="comp9">0</span></span>
          </div>
          <div class="comparison-item" style="border-bottom: 2px solid rgba(102, 126, 234, 0.3); padding: 12px 0; font-weight: 700;">
            <span class="comparison-label">Net Annual Income</span>
            <span class="comparison-value">‚Çπ<span id="comp10">0</span></span>
          </div>
        </div>

        <div class="comparison-card">
          <h4>üìà Percentage Breakdown</h4>
          <div class="comparison-item">
            <span class="comparison-label">PF (% of Basic)</span>
            <span class="comparison-value"><span id="comp11">0</span>%</span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Tax Rate (% of Income)</span>
            <span class="comparison-value"><span id="comp12">0</span>%</span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Deduction Rate</span>
            <span class="comparison-value"><span id="comp13">0</span>%</span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Take-Home % of Gross</span>
            <span class="comparison-value"><span id="comp14">0</span>%</span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Effective Tax Rate</span>
            <span class="comparison-value"><span id="comp15">0</span>%</span>
          </div>
        </div>
      </div>

      <h3 style="margin-top: 28px;">Summary Sheet</h3>
      <table>
        <thead>
          <tr>
            <th>Description</th>
            <th>Monthly (‚Çπ)</th>
            <th>Annual (‚Çπ)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Basic Salary</strong></td>
            <td>‚Çπ<span id="sumM1">0</span></td>
            <td>‚Çπ<span id="sumA1">0</span></td>
          </tr>
          <tr>
            <td><strong>Total Allowances</strong></td>
            <td>‚Çπ<span id="sumM2">0</span></td>
            <td>‚Çπ<span id="sumA2">0</span></td>
          </tr>
          <tr>
            <td><strong>Gross Salary</strong></td>
            <td>‚Çπ<span id="sumM3">0</span></td>
            <td>‚Çπ<span id="sumA3">0</span></td>
          </tr>
          <tr>
            <td><strong>Income Tax</strong></td>
            <td>‚Çπ<span id="sumM7">0</span></td>
            <td>‚Çπ<span id="sumA7">0</span></td>
          </tr>
          <tr>
            <td><strong>PF Deduction</strong></td>
            <td>‚Çπ<span id="sumM4">0</span></td>
            <td>‚Çπ<span id="sumA4">0</span></td>
          </tr>
          <tr style="background: linear-gradient(90deg, #e0e7ff 0%, #f3e8ff 100%); font-weight: 700;">
            <td><strong>NET TAKE-HOME SALARY</strong></td>
            <td>‚Çπ<span id="sumM9">0</span></td>
            <td>‚Çπ<span id="sumA9">0</span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="actions">
      <button class="btn-primary" onclick="reset()">üîÑ Reset All</button>
      <button onclick="downloadReport()">üì• Download</button>
      <button onclick="printReport()">üñ®Ô∏è Print</button>
      <button onclick="copyResults()">üìã Copy</button>
    </div>
  </div>

  <!-- Chart Section -->
  <div class="card chart-container">
    <h3>üìä Salary Composition</h3>
    <canvas id="salaryChart" width="800" height="300"></canvas>
  </div>

  <!-- Tax Comparison Chart -->
  <div class="card chart-container">
    <h3>üìä New vs Old Tax Regime</h3>
    <canvas id="taxChart" width="800" height="300"></canvas>
  </div>

</section>

<footer>
  <p>¬© 2025 Advanced Salary Calculator | Tax calculations based on FY 2024-25 rules | For reference only</p>
</footer>

<script>
// ========== UTILITY FUNCTIONS ==========
function formatNumber(n) {
  return Math.round(n).toLocaleString('en-IN');
}

function switchTab(e, tab) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
  document.getElementById(tab).classList.add('active');
  e.target.classList.add('active');
}

function syncBasic() {
  document.getElementById('basicSalary').value = document.getElementById('basicSlider').value;
  calculate();
}

document.getElementById('basicSalary')?.addEventListener('input', function() {
  document.getElementById('basicSlider').value = this.value;
});

// ========== MAIN CALCULATION ==========
function calculate() {
  const basicAnnual = parseFloat(document.getElementById('basicSalary').value) || 0;
  const basicMonthly = basicAnnual / 12;
  const hra = parseFloat(document.getElementById('hra').value) || 0;
  const da = parseFloat(document.getElementById('da').value) || 0;
  const conveyance = parseFloat(document.getElementById('conveyance').value) || 0;
  const medical = parseFloat(document.getElementById('medical').value) || 0;
  const otherAllowances = parseFloat(document.getElementById('other').value) || 0;
  const months = parseFloat(document.getElementById('months').value) || 12;

  const grossMonthly = basicMonthly + hra + da + conveyance + medical + otherAllowances;
  const grossAnnual = grossMonthly * months;

  document.getElementById('monthlyGross').textContent = formatNumber(basicMonthly);
  document.getElementById('annualGross').textContent = formatNumber(basicAnnual);
  document.getElementById('totalAllowances').textContent = formatNumber(hra + da + conveyance + medical + otherAllowances);
  document.getElementById('totalEarnings').textContent = formatNumber(grossMonthly);
  document.getElementById('breakBasic').textContent = formatNumber(basicMonthly);
  document.getElementById('breakAnnualBasic').textContent = formatNumber(basicAnnual);
  document.getElementById('breakAllowances').textContent = formatNumber((hra + da + conveyance + medical + otherAllowances) * months);

  // TAX CALCULATION
  const section80c = parseFloat(document.getElementById('section80c').value) || 0;
  const section80ccd = parseFloat(document.getElementById('section80ccd').value) || 0;
  const homeLoanInterest = parseFloat(document.getElementById('homeLoanInterest').value) || 0;
  const mediclaim = parseFloat(document.getElementById('mediclaim').value) || 0;
  const educationLoan = parseFloat(document.getElementById('educationLoan').value) || 0;
  const section80g = parseFloat(document.getElementById('section80g').value) || 0;
  const savingsInterest = parseFloat(document.getElementById('savingsInterest').value) || 0;
  const standardDeduction = parseFloat(document.getElementById('standardDeduction').value) || 0;
  const regime = document.getElementById('regime').value;
  const ageCategory = document.getElementById('ageCategory').value;

  let totalDeductions = section80c + section80ccd + homeLoanInterest + mediclaim + educationLoan + section80g + Math.min(savingsInterest, 10000);
  let taxableIncome = grossAnnual - totalDeductions - standardDeduction;
  taxableIncome = Math.max(0, taxableIncome);

  let incomeTaxNew = calculateTaxNew(taxableIncome, ageCategory);
  let incomeTaxOld = calculateTaxOld(taxableIncome, ageCategory);

  const surchargeRate = parseFloat(document.getElementById('surcharge').value) || 0;
  const selectedTax = regime === 'both' ? incomeTaxNew : (regime === 'new' ? incomeTaxNew : incomeTaxOld);
  const surchargeAmount = selectedTax * (surchargeRate / 100);
  const cess = (selectedTax + surchargeAmount) * 0.04;
  const totalTax = selectedTax + surchargeAmount + cess;
  const monthlyTax = totalTax / months;

  document.getElementById('taxableIncome').textContent = formatNumber(taxableIncome);
  document.getElementById('incomeTaxNew').textContent = formatNumber(incomeTaxNew);
  document.getElementById('incomeTaxOld').textContent = formatNumber(incomeTaxOld);
  document.getElementById('totalTax').textContent = formatNumber(totalTax);

  // DEDUCTIONS
  const pf = (parseFloat(document.getElementById('pf').value) || 12) / 100;
  const esi = (parseFloat(document.getElementById('esi').value) || 0.75) / 100;
  const professionalTax = parseFloat(document.getElementById('professionalTax').value) || 0;
  const loanEmi = parseFloat(document.getElementById('loanEmi').value) || 0;
  const unionFee = parseFloat(document.getElementById('unionFee').value) || 0;
  const voluntaryFund = parseFloat(document.getElementById('voluntaryFund').value) || 0;
  const lifeInsurance = parseFloat(document.getElementById('lifeInsurance').value) || 0;
  const lunch = parseFloat(document.getElementById('lunch').value) || 0;
  const otherStatutory = parseFloat(document.getElementById('other_deductions').value) || 0;
  const otherVoluntary = parseFloat(document.getElementById('other_voluntary').value) || 0;

  const pfAmount = basicMonthly * pf;
  const esiAmount = basicMonthly < 21000 ? basicMonthly * esi : 0;
  const totalStatutory = pfAmount + esiAmount + professionalTax + otherStatutory;
  const totalOtherDeductions = loanEmi + unionFee + voluntaryFund + lifeInsurance + lunch + otherVoluntary;
  const totalMonthlyDeductions = totalStatutory + totalOtherDeductions + monthlyTax;
  const monthlySalary = grossMonthly - totalMonthlyDeductions;

  document.getElementById('pfAmount').textContent = formatNumber(pfAmount);
  document.getElementById('esiAmount').textContent = formatNumber(esiAmount);
  document.getElementById('totalStatutory').textContent = formatNumber(totalStatutory);
  document.getElementById('totalMonthlyDeductions').textContent = formatNumber(totalMonthlyDeductions);
  document.getElementById('monthlySalary').textContent = formatNumber(monthlySalary);
  document.getElementById('breakEarnings').textContent = formatNumber(grossMonthly);
  document.getElementById('breakDeductions').textContent = formatNumber(totalMonthlyDeductions);
  document.getElementById('breakTakeHome').textContent = formatNumber(monthlySalary);

  // COMPARISON
  document.getElementById('comp1').textContent = formatNumber(basicMonthly);
  document.getElementById('comp2').textContent = formatNumber(hra + da + conveyance + medical + otherAllowances);
  document.getElementById('comp3').textContent = formatNumber(grossMonthly);
  document.getElementById('comp4').textContent = formatNumber(totalMonthlyDeductions);
  document.getElementById('comp5').textContent = formatNumber(monthlySalary);
  document.getElementById('comp6').textContent = formatNumber(grossAnnual);
  document.getElementById('comp7').textContent = formatNumber(totalDeductions + standardDeduction);
  document.getElementById('comp8').textContent = formatNumber(taxableIncome);
  document.getElementById('comp9').textContent = formatNumber(totalTax);
  document.getElementById('comp10').textContent = formatNumber(grossAnnual - totalMonthlyDeductions * months);

  const pf_pct = basicAnnual > 0 ? (pfAmount * 12 / basicAnnual * 100) : 0;
  const tax_pct = grossAnnual > 0 ? (totalTax / grossAnnual * 100) : 0;
  const deduction_pct = grossMonthly > 0 ? (totalMonthlyDeductions / grossMonthly * 100) : 0;
  const takeHome_pct = grossMonthly > 0 ? (monthlySalary / grossMonthly * 100) : 0;
  const effective_tax = grossAnnual > 0 ? (totalTax / grossAnnual * 100) : 0;

  document.getElementById('comp11').textContent = pf_pct.toFixed(2);
  document.getElementById('comp12').textContent = tax_pct.toFixed(2);
  document.getElementById('comp13').textContent = deduction_pct.toFixed(2);
  document.getElementById('comp14').textContent = takeHome_pct.toFixed(2);
  document.getElementById('comp15').textContent = effective_tax.toFixed(2);

  // SUMMARY
  document.getElementById('sumM1').textContent = formatNumber(basicMonthly);
  document.getElementById('sumA1').textContent = formatNumber(basicAnnual);
  document.getElementById('sumM2').textContent = formatNumber(hra + da + conveyance + medical + otherAllowances);
  document.getElementById('sumA2').textContent = formatNumber((hra + da + conveyance + medical + otherAllowances) * months);
  document.getElementById('sumM3').textContent = formatNumber(grossMonthly);
  document.getElementById('sumA3').textContent = formatNumber(grossAnnual);
  document.getElementById('sumM4').textContent = formatNumber(pfAmount);
  document.getElementById('sumA4').textContent = formatNumber(pfAmount * months);
  document.getElementById('sumM7').textContent = formatNumber(monthlyTax);
  document.getElementById('sumA7').textContent = formatNumber(totalTax);
  document.getElementById('sumM9').textContent = formatNumber(monthlySalary);
  document.getElementById('sumA9').textContent = formatNumber(monthlySalary * months);

  updateSalaryChart(basicMonthly, hra + da + conveyance + medical + otherAllowances, totalMonthlyDeductions, monthlySalary);
  updateTaxChart(incomeTaxNew, incomeTaxOld);
}

// TAX CALCULATION
function calculateTaxNew(income, ageCategory) {
  if (income <= 400000) return 0;
  let tax = 0;
  if (income <= 500000) tax = (income - 400000) * 0.05;
  else if (income <= 750000) tax = 5000 + (income - 500000) * 0.10;
  else if (income <= 1000000) tax = 30000 + (income - 750000) * 0.15;
  else if (income <= 1250000) tax = 67500 + (income - 1000000) * 0.20;
  else if (income <= 1500000) tax = 117500 + (income - 1250000) * 0.25;
  else tax = 180000 + (income - 1500000) * 0.30;
  if (ageCategory === 'super' && income <= 500000) tax = 0;
  return tax;
}

function calculateTaxOld(income, ageCategory) {
  let limit = 250000;
  if (ageCategory === 'senior') limit = 500000;
  if (income <= limit) return 0;
  let tax = 0;
  const adj = income - limit;
  if (adj <= 250000) tax = adj * 0.05;
  else if (adj <= 500000) tax = 12500 + (adj - 250000) * 0.20;
  else if (adj <= 1000000) tax = 112500 + (adj - 500000) * 0.30;
  else tax = 262500 + (adj - 1000000) * 0.45;
  return tax;
}

// CHARTS
function updateSalaryChart(basic, allowances, deductions, takeHome) {
  const canvas = document.getElementById('salaryChart');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const gross = basic + allowances;
  const barWidth = 60, spacing = 100, maxHeight = 200, maxValue = gross * 1.2, startX = 60;
  const data = [
    { label: 'Basic', value: basic, color: '#667eea' },
    { label: 'Allowances', value: allowances, color: '#764ba2' },
    { label: 'Deductions', value: -deductions, color: '#f59e0b' },
    { label: 'Take-Home', value: takeHome, color: '#10b981' }
  ];
  data.forEach((d, i) => {
    const x = startX + i * spacing;
    const barHeight = Math.abs(d.value) / maxValue * maxHeight;
    const y = 200 - barHeight;
    ctx.fillStyle = d.color;
    ctx.fillRect(x, y, barWidth, barHeight);
    ctx.fillStyle = '#1f2937';
    ctx.font = 'bold 12px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('‚Çπ' + formatNumber(Math.abs(d.value)), x + barWidth / 2, y - 10);
    ctx.fillText(d.label, x + barWidth / 2, 280);
  });
}

function updateTaxChart(taxNew, taxOld) {
  const canvas = document.getElementById('taxChart');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const maxTax = Math.max(taxNew, taxOld) * 1.3;
  const barWidth = 80, spacing = 200, maxHeight = 200, startX = 80;
  const data = [
    { label: 'New Regime', value: taxNew, color: '#667eea' },
    { label: 'Old Regime', value: taxOld, color: '#764ba2' }
  ];
  data.forEach((d, i) => {
    const x = startX + i * spacing;
    const barHeight = d.value / maxTax * maxHeight;
    const y = 200 - barHeight;
    ctx.fillStyle = d.color;
    ctx.fillRect(x, y, barWidth, barHeight);
    ctx.fillStyle = '#1f2937';
    ctx.font = 'bold 12px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('‚Çπ' + formatNumber(d.value), x + barWidth / 2, y - 10);
    ctx.fillText(d.label, x + barWidth / 2, 280);
  });
}

// ACTIONS
function reset() {
  document.getElementById('basicSalary').value = 600000;
  document.getElementById('hra').value = 30000;
  document.getElementById('da').value = 10000;
  document.getElementById('conveyance').value = 1600;
  document.getElementById('medical').value = 3000;
  document.getElementById('other').value = 0;
  calculate();
}

function downloadReport() {
  const text = `SALARY REPORT\nGross: ‚Çπ${document.getElementById('totalEarnings').textContent}\nTax: ‚Çπ${document.getElementById('totalTax').textContent}\nNet: ‚Çπ${document.getElementById('monthlySalary').textContent}`;
  const a = document.createElement('a');
  a.href = 'data:text/plain,' + encodeURIComponent(text);
  a.download = 'salary_report.txt';
  a.click();
  showToast('Downloaded!');
}

function printReport() {
  const w = window.open();
  w.document.write(`<h1>Salary Report</h1><p>Gross: ‚Çπ${document.getElementById('totalEarnings').textContent}</p><p>Net: ‚Çπ${document.getElementById('monthlySalary').textContent}</p>`);
  w.print();
}

function copyResults() {
  const text = `Gross: ‚Çπ${document.getElementById('totalEarnings').textContent} | Net: ‚Çπ${document.getElementById('monthlySalary').textContent}`;
  navigator.clipboard.writeText(text);
  showToast('Copied!');
}

function showToast(msg) {
  const t = document.createElement('div');
  t.className = 'toast';
  t.textContent = msg;
  document.body.appendChild(t);
  setTimeout(() => t.remove(), 2500);
}

window.addEventListener('load', calculate);
</script>

</body>
</html>
