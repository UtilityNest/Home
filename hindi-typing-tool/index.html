<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hindi Typing Tool – UtilityNest</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- QUILL CORE -->
<link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>

<!-- QUILL INDIC INPUT (TRANSLITERATION) -->
<script src="https://cdn.jsdelivr.net/npm/quill-input@1.1.7/dist/quill-input.min.js"></script>

<style>
body{
  margin:0;
  font-family:system-ui,Arial;
  background:#f6f7fb;
}
.container{
  max-width:900px;
  margin:auto;
  padding:40px 20px 60px;
}
h1{
  margin:0 0 5px;
}
.subtitle{
  margin:0 0 20px;
  color:#555;
}
.editor-wrapper{
  background:#fff;
  border-radius:12px;
  box-shadow:0 2px 6px rgba(0,0,0,.06);
  padding:12px 12px 20px;
}
#toolbar{
  border-radius:8px 8px 0 0;
}
#editor{
  min-height:180px;
}
.output{
  margin-top:24px;
}
textarea{
  width:100%;
  min-height:140px;
  padding:12px;
  font-size:18px;
  border-radius:8px;
  border:1px solid #ccc;
  resize:vertical;
}
.actions{
  margin-top:10px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}
button{
  padding:9px 16px;
  font-size:15px;
  cursor:pointer;
  border-radius:6px;
  border:1px solid #1a73e8;
  background:#1a73e8;
  color:#fff;
}
button.secondary{
  background:#fff;
  color:#1a73e8;
}
.toggle-row{
  margin:10px 0 0;
  display:flex;
  align-items:center;
  gap:8px;
  font-size:14px;
  color:#333;
}
.toggle-row input{
  transform:scale(1.1);
}
.info{
  margin-top:10px;
  font-size:13px;
  color:#777;
}
.footer-note{
  margin-top:26px;
  font-size:13px;
  color:#777;
}
</style>
</head>

<body>

<div class="container">
  <h1>Hindi Typing Tool</h1>
  <p class="subtitle">Type in English (mera bharat mahan) → get automatic Hindi: मेरा भारत महान.</p>

  <div class="editor-wrapper">
    <!-- Toolbar -->
    <div id="toolbar">
      <span class="ql-formats">
        <button class="ql-bold"></button>
        <button class="ql-italic"></button>
        <button class="ql-underline"></button>
      </span>
      <span class="ql-formats">
        <button class="ql-list" value="ordered"></button>
        <button class="ql-list" value="bullet"></button>
      </span>
      <span class="ql-formats">
        <button class="ql-undo">Undo</button>
        <button class="ql-redo">Redo</button>
      </span>
      <span class="ql-formats">
        <select class="ql-font"></select>
        <select class="ql-size"></select>
      </span>
    </div>

    <!-- Editor -->
    <div id="editor"></div>

    <!-- Mode toggle -->
    <div class="toggle-row">
      <input type="checkbox" id="hiToggle" checked>
      <label for="hiToggle">Enable Hindi transliteration (English → Hindi)</label>
    </div>
    <div class="info">
      Tip: Type like “hindi me likhna bahut aasan hai” and press space for correct Hindi words.
    </div>
  </div>

  <!-- Output area -->
  <div class="output">
    <h3>Hindi Output (plain text)</h3>
    <textarea id="output" readonly></textarea>
    <div class="actions">
      <button onclick="copyText()">Copy</button>
      <button class="secondary" onclick="downloadText()">Download .txt</button>
      <button class="secondary" onclick="clearAll()">Clear</button>
    </div>
  </div>

  <div class="footer-note">
    Works best in modern browsers (Chrome, Edge, Firefox). Internet connection required for this demo.
  </div>
</div>

<script>
// Register quill-input module with Quill (library exposes QuillInputModule)
Quill.register('modules/input', window.QuillInputModule || window.QuillInput);

// Custom toolbar handlers for undo/redo
const icons = Quill.import('ui/icons');
icons['undo'] = '<span>↺</span>';
icons['redo'] = '<span>↻</span>';

// Initialize editor
var quill = new Quill('#editor', {
  theme: 'snow',
  placeholder: 'Type here: mera bharat mahan hai',
  modules: {
    toolbar: {
      container: '#toolbar',
      handlers: {
        'undo': function() {
          this.quill.history.undo();
        },
        'redo': function() {
          this.quill.history.redo();
        }
      }
    },
    history: {
      delay: 1000,
      maxStack: 100,
      userOnly: true
    },
    // Hindi transliteration using quill-input
    input: {
      type: 'text',   // transliteration
      language: 'hi'  // Hindi
    }
  }
});

// Keep output textarea synced with editor's plain Hindi text
function updateOutput() {
  document.getElementById("output").value = quill.getText().trim();
}

quill.on('text-change', updateOutput);

// Toggle transliteration on/off
const hiToggle = document.getElementById('hiToggle');
hiToggle.addEventListener('change', function () {
  const enabled = this.checked;
  const inputModule = quill.getModule('input');
  if (inputModule && inputModule.setEnabled) {
    inputModule.setEnabled(enabled);
  } else {
    // Fallback: simple enable/disable via flag if module API differs
    quill.root.dataset.hiEnabled = enabled ? '1' : '0';
  }
});

// Copy to clipboard
function copyText(){
  const out = document.getElementById("output");
  out.focus();
  out.select();
  const ok = document.execCommand("copy");
  if(ok){
    alert("Copied to clipboard!");
  }else{
    alert("Press Ctrl+C to copy.");
  }
}

// Download as .txt
function downloadText(){
  const text = document.getElementById("output").value || "";
  const blob = new Blob([text], {type: "text/plain;charset=utf-8"});
  const url  = URL.createObjectURL(blob);
  const a    = document.createElement("a");
  a.href = url;
  a.download = "hindi-text.txt";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

// Clear editor and output
function clearAll(){
  quill.setText('');
  document.getElementById("output").value = '';
}
</script>

</body>
</html>
